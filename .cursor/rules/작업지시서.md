# Cursor 작업 지시서

## 우선순위

1. P0~P4 → 2. 분기 → 3. W/R/L → 4. 코드 수정

---

## 연동 규칙

| 규칙 | 적용 시점 |
|------|----------|
| **convention-first** | 모든 수정 전 – 근처 코드·유사 구현·컨벤션 확인 |
| **css-convention** | App.css 수정 시 – 플랫·쉼표 셀렉터 금지, 네스팅만 사용 |

---

## 목적·범위

- **대상**: 코드 수정/리팩토링 요청
- **맥락**: React, CSS 별도. 엔트리·contexts·hooks·components·utils·modals·processes 전역

| 분기 | 조건 | 동작 |
|------|------|------|
| 단순 | 오타, 변수명, 한 줄, 명확한 1:1 대체 | 즉시 수정 |
| 복잡 | 리팩토링, 구조 변경, Provider/Context, 다수 파일 | W1~W5 적용 |
| CSS | App.css 수정 | convention-first + css-convention 선행 |

---

## 원칙 (P0~P4)

| | 내용 |
|---|------|
| P0 | 근본 원인부터 해결 |
| P1 | 중단 시 구조적 보고 (왜, 부족한 것, 필요한 것, 대안) |
| P2 | 의미론적 명명 (역할/책임 기반) |
| P3 | 추적 가능한 변경 |
| P4 | 찌꺼기 제거 (Dead Code, 임시물) |

---

## 필수 규칙 (R2, R5, R6~R9)

| | 내용 |
|---|------|
| R2 | 모든 변경에 "왜" 필요 – 이유 없이 수정하지 않음 |
| R5 | 삭제/수정 전 사용처 확인. 중복 제거 시 기준 버전 선언 |
| R6 | **원인 파악 없이 수정 금지** – 원인 분석 → 수정 계획 → 실행 순서 준수 |
| R7 | 사용자 요청 정확히 따름 – "되돌려", "원인 파악 후 수정" 등 지시 그대로 수행 |
| R8 | **과도한 기술 설명 금지** – 요청하지 않은 문법·개념 설명 자제 |
| R9 | 사과 필요 시 시말서 형식 (경위·잘못된 점·교훈·결어) 작성 |

---

## 복잡한 요청 실행

### 워크플로우 (W1~W5)

| | 내용 |
|---|------|
| W1 | 맥락·요청 요약. 모호하면 질문·가정. 부분만 보고 과잉 리팩토링 금지. 전체 흐름 영향 고려 |
| W2 | 근본 원인 분석 (P0 적용) |
| W3 | 변경 계획(원자적 범위). 계획 단위 반드시 완료 |
| W4 | 코드 제안 |
| W5 | 변경 요약 + 검증 + TODO. 적용 원칙(P) 짧게 언급 |

### Provider/Context 시 (L1~L3)

W1~W5 구체화. P2, P4 참조.

| | 내용 |
|---|------|
| L1 | Context 훅 Provider 바깥 호출 위험? 상태 순서 꼬일 위험? 같은 역할 Provider 중복? |
| L2 | 역할 기반 재배치. 불필요한 중첩 제거 |
| L3 | 이동/삭제/통합 내역. 구조 단순화. 검증 시나리오 |
